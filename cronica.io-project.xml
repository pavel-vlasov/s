<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="7116301d-c9c6-435f-a2f5-2d724a4c9e0f" activeEnvironment="Default" name="REST Project 2" resourceRoot="" soapui-version="5.4.0" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="14556fcd-b880-437c-b0cc-9f13830467b1" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://api-issuer.cronica.io" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://api-issuer.cronica.io</con:endpoint></con:endpoints><con:resource name="Token" path="/oauth/token" id="f6398fc7-55ae-43d1-9db8-b346caad1acc"><con:settings/><con:parameters/><con:method name="Token 1" id="d2b22207-f296-4735-a5cc-9e9da5e38bc1" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:tok="https://api-issuer.cronica.io/oauth/token">tok:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:tok="https://api-issuer.cronica.io/oauth/token">tok:Response</con:element></con:representation><con:request name="Request 1" id="a9d61293-a2b2-494d-ae69-793e32c64c19" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Authorization" value="Basic YXV0by10ZXN0LXBhc3M6ZmU1NDdmOWU2MTYyZTcyMzk4NTEyZTMzM2Y4NTU4MzY4NGRkMjIyMQ=="/>
  &lt;con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://api-issuer.cronica.io</con:endpoint><con:request>username=admin&amp;password=Cr0nicAaDm1n&amp;grant_type=password</con:request><con:originalUri>https://api-issuer.cronica.io/oauth/token</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="a312ddde-94f0-4e9e-9e76-e58aef549f12" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://api-issuer.cronica.io" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://api-issuer.cronica.io</con:endpoint></con:endpoints><con:resource name="User" path="/v1/user" id="4d0d182c-580b-486a-a6ce-415e97f8662f"><con:settings/><con:parameters/><con:method name="User 1" id="7603f295-6f82-4ec4-bf6d-31cc8a60b2fc" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:user="https://api-issuer.cronica.io/v1/user">user:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:user="https://api-issuer.cronica.io/v1/user">user:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>422</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="e335edb7-cca4-45eb-b9e2-251e9cea39c1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://api-issuer.cronica.io</con:endpoint><con:request>{
  "username": "user-test-${#TestCase#id}",
  "password": "9ip1abaoA8n1pn1",
  "firstName": "user_first_name",
  "lastName": "user_last_name",
  "email": "email${#TestCase#id}@test.test",
  "role": "ADMIN"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="3686d6fe-edaa-4151-a625-0b47896e9297" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="70c8977b-b11d-4da6-8c01-c743c0bdd32d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Get token" id="6cbd91e4-0fc2-4252-bc84-431b3f042c5c"><con:settings/><con:config service="https://api-issuer.cronica.io" resourcePath="/oauth/token" methodName="Token 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Token 1 - Request 1" id="a9d61293-a2b2-494d-ae69-793e32c64c19" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Authorization" value="Basic YXV0by10ZXN0LXBhc3M6ZmU1NDdmOWU2MTYyZTcyMzk4NTEyZTMzM2Y4NTU4MzY4NGRkMjIyMQ=="/>
  &lt;con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://api-issuer.cronica.io</con:endpoint><con:request>username=admin&amp;password=Cr0nicAaDm1n&amp;grant_type=password</con:request><con:originalUri>https://api-issuer.cronica.io/oauth/token</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="886e6263-0e64-4ac1-87b4-f473eecfec01" name="Valid HTTP Status Codes"><con:configuration><codes>200, 201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="b26c3390-2987-4c5d-b64f-82cecd04a03f"><con:settings/><con:config><script> a = Math.abs(new Random().nextInt() % 600) + 1;
log.info ("a = " + a);
testRunner.testCase.setPropertyValue( "id", Integer.toString(a) )
c = testRunner.testCase.getPropertyValue("id")
log.info (c)


</script></con:config></con:testStep><con:testStep type="restrequest" name="Create user" id="740c923a-bcf4-4f59-8b51-fc89b0c86a7d"><con:settings/><con:config service="https://api-issuer.cronica.io" resourcePath="/v1/user" methodName="User 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Create user" id="e335edb7-cca4-45eb-b9e2-251e9cea39c1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${#TestCase#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://api-issuer.cronica.io</con:endpoint><con:request>{
  "username": "user-test-${#TestCase#id}",
  "password": "9ip1abaoA8n1pn1",
  "firstName": "user_first_name",
  "lastName": "user_last_name",
  "email": "email${#TestCase#id}@test.test",
  "role": "ADMIN"
}</con:request><con:originalUri>https://api-issuer.cronica.io/v1/user</con:originalUri><con:assertion type="Simple Contains" id="180c7bc0-0887-4c48-9284-5aa4fcb01b34" name="Contains"><con:configuration><token>user-test-${#TestCase#id}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="948b0a01-57e1-475f-b29f-0aaa54bbfad5" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a6ff1c38-bdd1-4293-bd6a-910aba329c61" name="Contains 1"><con:configuration><token>email${#TestCase#id}@test.test</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>566</con:value></con:property><con:property><con:name>token</con:name><con:value>${Get token#Response#$['token_type']} ${Get token#Response#$['access_token']}</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer><con:oAuth2Profile><con:name>token</con:name><con:accessToken>${#TestCase#token}</con:accessToken><con:accessTokenPosition>HEADER</con:accessTokenPosition><con:oAuth2Flow>AUTHORIZATION_CODE_GRANT</con:oAuth2Flow><con:refreshAccessTokenMethod>AUTOMATIC</con:refreshAccessTokenMethod><con:accessTokenStatus>ENTERED_MANUALLY</con:accessTokenStatus><con:accessTokenStartingStatus>ENTERED_MANUALLY</con:accessTokenStartingStatus></con:oAuth2Profile></con:oAuth2ProfileContainer><con:oAuth1ProfileContainer/></con:soapui-project>